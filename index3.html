<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Family Club School App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://use.typekit.net/lfp3llb.css">
  <style>
  
    :root {
      --top-nav-h: 60px;
      --bottom-nav-h: 62px;
      --safe-bottom: max(env(safe-area-inset-bottom), 0px);
      --radius-lg: 25px;
      --brand-grad: linear-gradient(135deg, #805700, #0066cc);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }
    body {
      background: url("SummerHeightsBAND1.png") no-repeat center center fixed;
      background-size: cover;
      opacity: 90%;
      color: #333;
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
    }

    /* Navs */
    .nav-top, .nav-bottom {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--brand-grad);
      color: #fff;
      padding: 10px 14px;
      box-shadow: 0 4px 8px rgba(0,0,0,.25);
    }
    .nav-top { min-height: var(--top-nav-h); border-radius: 0 0 var(--radius-lg) var(--radius-lg); }
    .nav-bottom {
      min-height: var(--bottom-nav-h);
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
      position: sticky; bottom: 0;
      padding-bottom: calc(10px + var(--safe-bottom));
    }
    .nav-title {
      flex: 1;
      font-family: "leida", sans-serif;
      font-weight: 300;
      text-align: center;
      font-size: clamp(1rem, 2.5vw, 1.25rem);
    }
    .nav-btn {
      background: rgba(255,255,255,.12);
      color: #fff;
      border: 0;
      padding: 8px 12px;
      border-radius: 20px;
      font-family: 'Orbitron', sans-serif;
      cursor: pointer;
    }

    main { flex: 1; }
    .page-area {
      width: 100%; max-width: 900px; margin: 0 auto;
      padding: 16px 12px;
    }
    .page-area.family { display: grid; place-items: center; min-height: calc(100dvh - var(--top-nav-h)); }
    .page-area.with-bottom { min-height: calc(100dvh - var(--top-nav-h) - var(--bottom-nav-h)); }

    /* Family page */
    .grandma-window {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      box-shadow: 0 6px 14px rgba(0,0,0,.18);
      padding: 24px;
      text-align: center;
      backdrop-filter: blur(6px);
    }
    .form-row { display: flex; gap: 8px; justify-content: center; margin-top: 12px; }
    .code-input {
      padding: 10px; border-radius: 12px; border: 2px solid #004080;
      text-align: center; flex: 1;
    }

    /* Carousel */
    .carousel-container {
      position: relative;
      height: 280px;
      margin-bottom: 20px;
    }
    .carousel-frame {
      height: 100%;
      width: 100%;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(6px);
      overflow: hidden;
      box-shadow: 0 6px 12px rgba(0,0,0,0.25),
                  0 12px 24px rgba(0,0,0,0.15);
    }
    .carousel {
      display: flex;
      transition: transform .5s ease-in-out;
      height: 100%;
    }
    .carousel .polaroid {
      flex: 0 0 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .carousel img,
    .carousel video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .carousel-container::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.4), rgba(0,0,0,0));
      pointer-events: none;
      border-radius: 18px;
    }
    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,.6);
      color: #fff;
      border: 0;
      border-radius: 50%;
      padding: 8px 12px;
      cursor: pointer;
      z-index: 2;
    }
    .carousel-btn.left { left: 10px; }
    .carousel-btn.right { right: 10px; }

    /* Noticeboard Posts */
    .sections-wrapper {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 24px;
      justify-items: center;
      align-items: start;
      padding: 20px;
      perspective: 1000px;
    }
    .section {
      position: relative;
      background: #fffef8;
      border-radius: 12px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
      padding: 16px;
      width: 100%;
      max-width: 320px;
      transform: rotate(var(--tilt, 0deg));
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .section:nth-child(odd) { --tilt: -2.5deg; }
    .section:nth-child(even) { --tilt: 2deg; }
    .section:nth-child(3n) { --tilt: -1.5deg; }
    .section:hover {
      transform: rotate(0deg) scale(1.02);
      box-shadow: 0 10px 18px rgba(0,0,0,0.3);
      z-index: 2;
    }
    .section::before {
      content: "";
      position: absolute;
      top: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 18px;
      height: 18px;
      background: radial-gradient(circle at 30% 30%, #ff4444, #aa0000);
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0,0,0,0.4);
      z-index: 3;
    }
    .section img,
    .section video {
      width: 100%;
      height: auto;
      border-radius: 8px;
      display: block;
      margin-top: 8px;
    }

    /* Text-only post style */
    .section.text-only {
      background: #fff9c4;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      font-size: 1rem;
      line-height: 1.4;
    }

    /* Conversations */
    .conversation-window {
      border: 1px solid #ccc; border-radius: 10px;
      display: flex; flex-direction: column;
      height: 150px; background: rgba(255,255,255,0.85);
      backdrop-filter: blur(6px);
      margin-top: 10px;
    }
    .conversation-window .messages { flex: 1; overflow-y: auto; padding: 6px; }
    .conversation-window .input-area { display: flex; border-top: 1px solid #ddd; }
    .conversation-window input { flex: 1; border: none; padding: 6px; }

    /* Forum Window */
    .forum-window {
      border: 2px solid #ccc;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(6px);
      display: flex;
      flex-direction: column;
      height: 400px;
      overflow: hidden;
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }
    .forum-messages {
      flex: 1;
      overflow-y: auto;
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .forum-post {
      background: #fdfdfd;
      border: 1px solid #ddd;
      padding: 10px 14px;
      border-radius: 8px;
      font-size: 0.95rem;
      line-height: 1.4;
      box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    }
    .forum-window .input-area {
      display: flex;
      border-top: 1px solid #ddd;
    }
    .forum-window input {
      flex: 1;
      border: none;
      padding: 8px;
    }
    /* Audio post styling */
.audio-polaroid {
  width: 100%;
  padding: 10px;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.audio-polaroid audio {
  width: 100%;
}
.page-area.with-bottom h2 {
  font-size: 2rem;
  text-align: center;
  margin-bottom: 8px;
  color: #222;
  font-family: 'Orbitron', sans-serif;
  text-shadow: 2px 2px 6px rgba(0,0,0,0.2);
  letter-spacing: 1px;
}

  </style>
</head>
<body>
  <div class="nav-top" id="navTop"></div>
  <main><div id="app"></div></main>
  <div class="nav-bottom" id="navBottom"></div>

  <script>
    let currentPage="family";
    let carouselIndex=0;

    const carouselImages=["Band1.png","dance.mp4","polaroidclouds.png","concert.mp4","warmup.mp4"];
const sections=[
  {img:"Band1.png", text:"September 31 2025: Local band practice in the park. New singer Jan."},
  {img:"Bandsingmonkey.mp4", text:"August 10 2025: Mr Gee showed us some ACDC riffs."},
  {img:"Band3.gif", text:"June 11 2025: Just gigging with Mr Gee."},
  {audio:"betterinflatable.mp3", text:"ðŸŽµ Audio clip from last Fridayâ€™s jam session."},  // âœ… NEW audio post
  {img:"polaroidclouds.png", text:"May 20 2025: We are over the clouds."},
  {img:"dance.mp4", text:"April 1 2025: Donâ€™t you wish you were at this gig."},
  {text:"ðŸ“¢ Band meeting this Friday at 7pm. Donâ€™t forget to bring your instruments!"}
];


    function render(){
      const app=document.getElementById("app");
      const navTop=document.getElementById("navTop");
      const navBottom=document.getElementById("navBottom");
      navTop.innerHTML=""; navBottom.innerHTML=""; navBottom.style.display="flex";

      const leftBtn=(currentPage==="family")?"":`<button class="nav-btn" onclick="showPage('family')">Home</button>`;
      const rightBtn=(currentPage==="club")?`<button class="nav-btn" onclick="showPage('school')">About</button>`:(currentPage==="school")?`<button class="nav-btn" onclick="showPage('club')">Club</button>`:"";
      navTop.innerHTML=`${leftBtn||'<span></span>'}<div class="nav-title">Summer Heights Band</div>${rightBtn||'<span></span>'}`;

      let html="";
      if(currentPage==="family"){
        navBottom.style.display="none";
        html=`<div class="page-area family">
          <div class="grandma-window">
            <h2>Dear Grandma, type your code below</h2>
            <form onsubmit="checkCode(event)" class="form-row">
              <input id="codeBox" class="code-input" placeholder="Enter code"/>
              <button class="nav-btn" type="submit">Go</button>
            </form>
          </div>
        </div>`;
      }

      if(currentPage==="club"){
        navBottom.innerHTML=`<button class="nav-btn" onclick="goBack()">âŸµ Back</button><div></div><button class="nav-btn" onclick="showPage('school')">About</button>`;
        html=`<div class="page-area with-bottom">
          <div class="carousel-container">
            <div class="carousel-frame">
              <div class="carousel" id="carousel">
                ${carouselImages.map(src=>`
                  <div class="polaroid">
                    ${src.endsWith(".mp4")?`<video src="${src}" autoplay loop muted playsinline></video>`:`<img src="${src}" alt="">`}
                  </div>`).join("")}
              </div>
            </div>
            <button class="carousel-btn left" onclick="prevSlide()">â€¹</button>
            <button class="carousel-btn right" onclick="nextSlide()">â€º</button>
          </div>
          <div class="sections-wrapper">
  ${sections.map((sec,i)=>`
    <div class="section ${sec.img || sec.audio ? "" : "text-only"}">
      <p><strong>${sec.text}</strong></p>

      ${sec.img ? `
        <div class="polaroid">
          ${sec.img.endsWith(".mp4")
            ? `<video src="${sec.img}" autoplay loop muted playsinline></video>`
            : `<img src="${sec.img}" alt="">`}
        </div>` : ""}

      ${sec.audio ? `
        <div class="audio-polaroid">
          <audio controls>
            <source src="${sec.audio}" type="audio/mpeg">
            Your browser does not support the audio element.
          </audio>
        </div>` : ""}

      <div class="conversation-window" id="conversation-${i}">
        <div class="messages"></div>
        <div class="input-area">
          <input type="text" id="input-${i}" placeholder="Type a message...">
          <button class="nav-btn" onclick="sendMessage(${i})">Send</button>
        </div>
      </div>
    </div>`).join("")}
</div>

      
        </div>`;
      }

      if(currentPage==="school"){
        navBottom.innerHTML=`<button class="nav-btn" onclick="goBack()">âŸµ Back</button><div></div><button class="nav-btn" onclick="showPage('club')">Club</button>`;
        html=`<div class="page-area with-bottom">
          <h2>ðŸ’¬ Letâ€™s Chat</h2>
          <p>Welcome to the forum â€” post your thoughts below.</p>
          <div class="forum-window" id="conversation">
            <div class="forum-messages"></div>
            <div class="input-area">
              <input type="text" id="convInput" placeholder="Write a messageâ€¦">
              <button class="nav-btn" onclick="sendMessageSchool()">Post</button>
            </div>
          </div>
        </div>`;
      }

      app.innerHTML=html;
      if(currentPage==="club") sections.forEach((_,i)=>loadMessages(i));
      if(currentPage==="school") loadMessagesSchool();
      updateCarousel();
    }

    function showPage(p){currentPage=p;render();}
    function goBack(){currentPage=(currentPage==="school")?"club":"family";render();}
    function checkCode(e){e.preventDefault();const val=document.getElementById("codeBox").value.trim();if(val==="ASD12")showPage("club");else alert("Invalid code");}

    function loadMessages(i){
      const d=document.querySelector(`#conversation-${i} .messages`);
      const saved=JSON.parse(localStorage.getItem(`messages-${i}`)||"[]");
      d.innerHTML="";
      saved.forEach(m=>{
        const div=document.createElement("div");
        div.textContent=m;
        d.appendChild(div);
      });
    }
    function sendMessage(i){
      const input=document.getElementById(`input-${i}`);
      const d=document.querySelector(`#conversation-${i} .messages`);
      const val=input.value.trim();
      if(!val)return;
      const div=document.createElement("div");
      div.textContent=val;
      d.appendChild(div);
      const saved=JSON.parse(localStorage.getItem(`messages-${i}`)||"[]");
      saved.push(val);
      localStorage.setItem(`messages-${i}`,JSON.stringify(saved));
      input.value="";
      d.scrollTop=d.scrollHeight;
    }

    function loadMessagesSchool(){
      const d=document.querySelector("#conversation .forum-messages");
      const saved=JSON.parse(localStorage.getItem("schoolMessages")||"[]");
      d.innerHTML="";
      saved.forEach(m=>{
        const div=document.createElement("div");
        div.className="forum-post";
        div.textContent=m;
        d.appendChild(div);
      });
    }
    function sendMessageSchool(){
      const input=document.getElementById("convInput");
      const d=document.querySelector("#conversation .forum-messages");
      const val=input.value.trim();
      if(!val)return;
      const div=document.createElement("div");
      div.className="forum-post";
      div.textContent=val;
      d.appendChild(div);
      const saved=JSON.parse(localStorage.getItem("schoolMessages")||"[]");
      saved.push(val);
      localStorage.setItem("schoolMessages",JSON.stringify(saved));
      input.value="";
      d.scrollTop=d.scrollHeight;
    }

    function updateCarousel(){
      const c=document.getElementById("carousel");
      if(c) c.style.transform=`translateX(-${carouselIndex*100}%)`;
    }
    function nextSlide(){carouselIndex=(carouselIndex+1)%carouselImages.length;updateCarousel();}
    function prevSlide(){carouselIndex=(carouselIndex-1+carouselImages.length)%carouselImages.length;updateCarousel();}

    render();
  </script>
</body>
</html>
